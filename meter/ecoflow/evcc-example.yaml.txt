# evcc Beispiel-Konfiguration für EcoFlow Stream
#
# Die Batterie wird als Meter mit BatteryController konfiguriert.
# evcc steuert die Batterie automatisch (Entlade-Sperre, Priorität, etc.)
#
# Ersetze die Platzhalter:
# - DEINE_SERIENNUMMER: z.B. BK61ZE1B2H6H0912
# - DEIN_ACCESS_KEY: aus EcoFlow Developer Portal
# - DEIN_SECRET_KEY: aus EcoFlow Developer Portal

network:
  schema: http
  host: evcc.local
  port: 7070

log: info

meters:
  # Haupt-Netzmessung (ersetzen mit deinem Grid-Meter)
  - name: netz
    type: template
    template: shelly-3em
    host: 192.168.1.100

  # EcoFlow Stream - PV Ertrag
  - name: ecoflow_pv
    type: template
    template: ecoflow-stream
    usage: pv
    sn: DEINE_SERIENNUMMER
    accesskey: DEIN_ACCESS_KEY
    secretkey: DEIN_SECRET_KEY

  # EcoFlow Stream - Batterie (mit automatischer Steuerung!)
  - name: ecoflow_battery
    type: template
    template: ecoflow-stream
    usage: battery
    sn: DEINE_SERIENNUMMER
    accesskey: DEIN_ACCESS_KEY
    secretkey: DEIN_SECRET_KEY

site:
  title: Mein Zuhause
  meters:
    grid: netz
    pv:
      - ecoflow_pv
    battery:
      - ecoflow_battery

  # Batterie-Priorität
  prioritySoc: 50     # Batterie bis 50% mit Priorität laden
  bufferSoc: 80       # Ab 80% für Fahrzeug-Laden freigeben
  bufferStartSoc: 90  # Batterie-Boost aktivieren ab 90%

# Wallbox (optional - ersetzen mit deiner Wallbox)
chargers:
  - name: wallbox
    type: template
    template: go-e
    host: 192.168.1.101

loadpoints:
  - title: Garage
    charger: wallbox
    mode: pv
    mincurrent: 6
    maxcurrent: 16
