template: homeassistant-switch
products:
  - brand: Home Assistant
group: switchsockets
requirements:
  evcc: ["skiptest"]
auth:
  type: homeassistant
  params: [home]
params:
  - name: uri
    deprecated: true
  - name: token
    deprecated: true
  - name: home
    description:
      de: Home Assistant Instanz
      en: Home Assistant Instance
    help:
      en: Can be found in Home Assistant UI under Settings -> System -> General -> Name. Used to identify you instance via mDNS.
      de: Kann in der Home Assistant UI unter Einstellungen -> System -> Allgemein -> Name gefunden werden. Wird verwendet um die Instanz via mDNS zu identifizieren.
    example: Home
    service: homeassistant/homes
    required: true
  - name: switch
    description:
      de: Entity ID des schaltbaren Geräts
      en: Entity ID of the switch device
    service: homeassistant/homes/{home}/entities?domain=switch
    example: switch.smartsocket
    required: true
  - name: power
    description:
      de: Entity ID für Leistungsmessung
      en: Entity ID for power measurement
    service: homeassistant/homes/{home}/entities?domain=sensor
    example: sensor.smartsocket_power
  - preset: switchsocket
render: |
  type: homeassistant-switch
  home: {{ .home }}
  enable: {{ .switch }}
  power: {{ .power }}
  {{ include "switchsocket" . }}
