template: homeassistant
products:
  - brand: Home Assistant
    description:
      generic: Charger
group: generic
requirements:
  description:
    en: Home Assistant instances in your network will be auto-discovered and suitable charger entities and services (e.g. `sensor.*`, `switch.*`, `number.*`) will be suggested.
    de: Home Assistant Instanzen in deinem Netzwerk werden automatisch erkannt und passende Wallbox-Entitäten und Services (z.B. `sensor.*`, `switch.*`, `number.*`) werden vorgeschlagen.
auth:
  type: homeassistant
  params: [uri]
params:
  - name: uri
    description:
      de: Home Assistant URI
      en: Home Assistant URI
    example: http://homeassistant.local:8123
    help:
      en: " " # overwrite default
      de: " " # overwrite default
    service: homeassistant/instances
    required: true
  - name: status
    description:
      de: Ladestatus-Sensor
      en: Charging status sensor
    service: homeassistant/entities?uri={uri}&domain=sensor,binary_sensor
    example: "sensor.charger_status"
    required: true
    help:
      en: Entity ID for charging status (A=ready, B=connected, C=charging, F=error)
      de: Entitäts-ID für Ladestatus (A=bereit, B=verbunden, C=laden, F=fehler)
  - name: enabled
    description:
      de: Aktivierungsstatus-Sensor
      en: Enabled status sensor
    service: homeassistant/entities?uri={uri}&domain=sensor,binary_sensor,switch
    example: "binary_sensor.charger_enabled"
    required: true
    help:
      en: Entity ID for enabled state (sensor, binary_sensor or switch with on/off or true/false state)
      de: Entitäts-ID für Aktivierungsstatus (sensor, binary_sensor oder switch mit on/off oder true/false Zustand)
  - name: enable
    description:
      de: Aktivierungsschalter
      en: Enable switch
    service: homeassistant/entities?uri={uri}&domain=switch,input_boolean
    example: "switch.charger_enable"
    required: true
    help:
      en: Entity ID for enable/disable control (switch or input_boolean)
      de: Entitäts-ID für Aktivierungs-/Deaktivierungs-Steuerung (switch oder input_boolean)
  - name: setMaxCurrent
    description:
      de: Maximale Stromstärke-Entität [A]
      en: Maximum current entity [A]
    service: homeassistant/entities?uri={uri}&domain=number,input_number
    example: "number.charger_max_current"
    required: true
    help:
      en: Entity ID for setting maximum current in amperes (number or input_number entity)
      de: Entitäts-ID zum Setzen der maximalen Stromstärke in Ampere (number oder input_number Entität)
  - name: power
    description:
      de: Leistungsentität
      en: Power entity
    service: homeassistant/entities?uri={uri}&domain=sensor
    example: "sensor.charger_power"
    advanced: true
    help:
      en: Entity ID for instantaneous power measurement in watts
      de: Entitäts-ID für momentane Leistungsmessung in Watt
  - name: energy
    description:
      de: Energieentität
      en: Energy entity
    service: homeassistant/entities?uri={uri}&domain=sensor
    example: "sensor.charger_energy"
    advanced: true
    help:
      en: Entity ID for cumulative energy measurement in kWh
      de: Entitäts-ID für kumulative Energiemessung in kWh
  - name: currentL1
    description:
      de: L1 Stromentität
      en: L1 current entity
    service: homeassistant/entities?uri={uri}&domain=sensor
    example: "sensor.charger_current_l1"
    advanced: true
    help:
      en: Entity ID for L1 current measurement in amperes
      de: Entitäts-ID für L1 Strommessung in Ampere
  - name: currentL2
    description:
      de: L2 Stromentität
      en: L2 current entity
    service: homeassistant/entities?uri={uri}&domain=sensor
    example: "sensor.charger_current_l2"
    advanced: true
    help:
      en: Entity ID for L2 current measurement in amperes
      de: Entitäts-ID für L2 Strommessung in Ampere
  - name: currentL3
    description:
      de: L3 Stromentität
      en: L3 current entity
    service: homeassistant/entities?uri={uri}&domain=sensor
    example: "sensor.charger_current_l3"
    advanced: true
    help:
      en: Entity ID for L3 current measurement in amperes
      de: Entitäts-ID für L3 Strommessung in Ampere
  - name: voltageL1
    description:
      de: L1 Spannungsentität
      en: L1 voltage entity
    service: homeassistant/entities?uri={uri}&domain=sensor
    example: "sensor.charger_voltage_l1"
    advanced: true
    help:
      en: Entity ID for L1 voltage measurement in volts
      de: Entitäts-ID für L1 Spannungsmessung in Volt
  - name: voltageL2
    description:
      de: L2 Spannungsentität
      en: L2 voltage entity
    service: homeassistant/entities?uri={uri}&domain=sensor
    example: "sensor.charger_voltage_l2"
    advanced: true
    help:
      en: Entity ID for L2 voltage measurement in volts
      de: Entitäts-ID für L2 Spannungsmessung in Volt
  - name: voltageL3
    description:
      de: L3 Spannungsentität
      en: L3 voltage entity
    service: homeassistant/entities?uri={uri}&domain=sensor
    example: "sensor.charger_voltage_l3"
    advanced: true
    help:
      en: Entity ID for L3 voltage measurement in volts
      de: Entitäts-ID für L3 Spannungsmessung in Volt
render: |
  type: homeassistant
  uri: {{ .uri }}
  status: {{ .status }}
  enabled: {{ .enabled }}
  enable: {{ .enable }}
  maxcurrent: {{ .setMaxCurrent }}
  power: {{ .power }}
  energy: {{ .energy }}
  {{- if and .currentL1 .currentL2 .currentL3 }}
  currents:
    - {{ .currentL1 }}
    - {{ .currentL2 }}
    - {{ .currentL3 }}
  {{- end }}
  {{- if and .voltageL1 .voltageL2 .voltageL3 }}
  voltages:
    - {{ .voltageL1 }}
    - {{ .voltageL2 }}
    - {{ .voltageL3 }}
  {{- end }}
