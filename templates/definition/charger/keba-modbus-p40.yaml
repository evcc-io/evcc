template: keba-modbus-p40
products:
  - brand: KEBA
    description:
      generic: KeContact P40
  - brand: KEBA
    description:
      generic: KeContact P40 Pro
capabilities: ["mA", "rfid", "1p3p"]
requirements:
  evcc: ["sponsorship"]
  description:
    de: |
      Folgende Einstellungen müssen in der KEBA eMobility App vorgenommen werden:
      * Modbus aktivieren: Die Optionen "Enable" und "Enable RFID" müssen in den "Modbus"-Einstellungen aktiviert sein. 
      * Um RFID-Karten zu verwenden, muss unter "Gerät" die Option "Autorisierung" aktiviert sein. 
      * Für die Phasenumschaltung wird mindestens Firmwareversion 1.3.0 benötigt. Unter "Photovoltaikoptimiertes Laden" muss die Phasenumschaltung aktiviert werden. Bei "Kommunikationskanal" muss "Modbus" gewählt werden.
    en: |
      Following settings have to be enabled using the KEBA eMobility App:
      * Enable Modbus: The "Enable" and "Enable RFID" options must be activated in the "Modbus" settings. 
      * To use RFID cards, the "Authorization" option must be activated under "Device". 
      * For phase switching the minimum firmware version 1.3.0 must be installed. In the "Photovoltaic Optimized Charging" settings, the phase switching needs to be enabled. The "communication channel" must be set to "Modbus".
params:
  - name: modbus
    choice: ["tcpip"]
    id: 255
  - name: welcomecharge
    advanced: true
render: |
  type: keba-modbus
  {{- include "modbus" . }}
  {{- if eq .welcomecharge "true" }}
  features: ["welcomecharge"]
  {{- end }}
