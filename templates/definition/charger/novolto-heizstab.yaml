template: novolto-heizstab
products:
  - brand: Novolto
    description:
      generic: P3000 Heizstab
  - brand: Novolto
    description:
      generic: P2300 Heizstab
group: heating
requirements:
  description:
    de: |
      Der Heizstab kommuniziert über MQTT. Die MQTT-Broker-Einstellungen müssen konfiguriert werden.
      Das MQTT-Topic für den Status muss evcc-Statuscodes zurückgeben: "A" (aus), "B" (bereit), "C" (heizt).
    en: |
      The heating rod communicates via MQTT. MQTT broker settings need to be configured.
      The MQTT status topic must return evcc status codes: "A" (off), "B" (standby/ready), "C" (heating).
params:
  - preset: mqtt
  - name: topic
    default: novolto/heizstab
    example: novolto/heizstab
    description:
      de: MQTT Topic Präfix
      en: MQTT topic prefix
    help:
      de: Basis-Topic für die MQTT-Kommunikation mit dem Heizstab
      en: Base topic for MQTT communication with the heating rod
render: |
  type: custom
  power:
    source: mqtt
    {{- include "mqtt" . | indent 2 }}
    topic: {{ .topic }}/power
  enabled:
    source: mqtt
    {{- include "mqtt" . | indent 2 }}
    topic: {{ .topic }}/enabled
  enable:
    source: mqtt
    {{- include "mqtt" . | indent 2 }}
    topic: {{ .topic }}/enable/set
  status:
    source: mqtt
    {{- include "mqtt" . | indent 2 }}
    topic: {{ .topic }}/status
  maxcurrent:
    source: mqtt
    {{- include "mqtt" . | indent 2 }}
    topic: {{ .topic }}/current_max/set
  soc:
    source: mqtt
    {{- include "mqtt" . | indent 2 }}
    topic: {{ .topic }}/temperature
  limitSoc:
    source: mqtt
    {{- include "mqtt" . | indent 2 }}
    topic: {{ .topic }}/temperature_target
  features:
    - heating
    - integrateddevice
  icon: heatpump
