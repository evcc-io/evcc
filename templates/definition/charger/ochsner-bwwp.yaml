template: ochsner-bwwp
products:
  - brand: Ochsner
    description:
      generic: BWWP Genius 333
group: heating
params:
  - name: host
  - name: port
    default: 502
  - name: id
    default: 1
render: |
  type: heatpump
  setmaxpower:
    source: watchdog
    timeout: 5s  # da WP alle 5s modbus Meldung erwartet
    initial: 0
    set:  
      source: delta  # nur Differenz zu der von WP berechneten Überschussleistung (Reg. 2012)
      get:
        source: modbus
        uri: {{ .host }}:{{ .port }}
        id: {{ .id }}
        register:
          address: 2012 # totale von der WP berechnete Überschussleistung Auflösung 1 W
          type: input
          decode: int16
      set:
        source: modbus
        uri: {{ .host }}:{{ .port }}
        id: {{ .id }}
        register:
          address: 2201 # SUR Überschussleistung Auflösung 1 W
          type: writeholding
          decode: int16
  temp:
    source: modbus
    uri: {{ .host }}:{{ .port }}
    id: {{ .id }}
    register:
      address: 2000 # angezeigte Temperatur Auflösung 0,1°C
      type: input
      decode: int16
    scale: 0.1
  limittemp:
    source: modbus
    uri: {{ .host }}:{{ .port }}
    id: {{ .id }}
    register:
      address: 2203 # Legionellen/Überschuss Solltemperatur Auflösung 0,1°C
      type: holding
      decode: int16
    scale: 0.1
