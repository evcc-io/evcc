template: homewizard-v2-battery
products:
  - brand: HomeWizard
    description:
      generic: Battery (HWE-BAT)
      de: Batterie (HWE-BAT)
requirements:
  description:
    en: |
      Battery device for SoC and power monitoring using WebSocket API v2.

      **Setup:** Run `evcc token homewizard` to discover and pair devices

      **Note:** Requires a `homewizard-p1` meter (grid) for battery control
    de: |
      Batteriegerät für SoC und Leistungsmessung mit WebSocket API v2.

      **Einrichtung:** Führen Sie `evcc token homewizard` aus

      **Hinweis:** Benötigt einen `homewizard-p1` Zähler (Netz) für Batteriesteuerung
params:
  - name: host
    description:
      en: Device hostname or IP
      de: Gerätehostname oder IP
    required: true
  - name: token
    description:
      en: Device authentication token
      de: Geräte-Authentifizierungstoken
    required: true
    mask: true
  - name: controller
    description:
      en: P1 meter name for battery control
      de: P1-Zähler Name für Batteriesteuerung
    help:
      en: Name of the grid meter (must be homewizard-p1 type)
      de: Name des Netzzählers (muss vom Typ homewizard-p1 sein)
    required: true
  - name: capacity
    description:
      en: Battery capacity (kWh)
      de: Batteriekapazität (kWh)
    help:
      en: Optional. Defaults to 2.47 kWh (HWE-BAT capacity)
      de: Optional. Standard ist 2,47 kWh (HWE-BAT Kapazität)
    advanced: true
  - name: maxcharge
    description:
      en: Maximum charge power (W)
      de: Maximale Ladeleistung (W)
    help:
      en: |
        Optional. Defaults to 800W (single HWE-BAT).
        For multiple batteries without unlocked power restrictions, use the values from your HomeWizard app.
        Example: 2 batteries = 800W, 4 batteries = 800W
      de: |
        Optional. Standard ist 800W (einzelne HWE-BAT).
        Für mehrere Batterien ohne freigeschaltete Leistungsbeschränkungen verwenden Sie die Werte aus Ihrer HomeWizard-App.
        Beispiel: 2 Batterien = 800W, 4 Batterien = 800W
    advanced: true
  - name: maxdischarge
    description:
      en: Maximum discharge power (W)
      de: Maximale Entladeleistung (W)
    help:
      en: |
        Optional. Defaults to 800W (single HWE-BAT).
        For multiple batteries without unlocked power restrictions, use the values from your HomeWizard app.
        Example: 2 batteries = 400W, 4 batteries = 200W
      de: |
        Optional. Standard ist 800W (einzelne HWE-BAT).
        Für mehrere Batterien ohne freigeschaltete Leistungsbeschränkungen verwenden Sie die Werte aus Ihrer HomeWizard-App.
        Beispiel: 2 Batterien = 400W, 4 Batterien = 200W
    advanced: true
  - name: timeout
    description:
      en: Connection timeout
      de: Verbindungs-Timeout
    advanced: true
    default: 30s
render: |
  type: homewizard-battery
  host: {{ .host }}
  token: {{ .token }}
  controller: {{ .controller }}
  {{- if .capacity }}
  capacity: {{ .capacity }}
  {{- end }}
  {{- if .maxcharge }}
  maxcharge: {{ .maxcharge }}
  {{- end }}
  {{- if .maxdischarge }}
  maxdischarge: {{ .maxdischarge }}
  {{- end }}
  {{- if .timeout }}
  timeout: {{ .timeout }}
  {{- end }}
