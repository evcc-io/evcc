template: rct-power
products:
  - brand: RCT
    description:
      generic: Power
capabilities: ["battery-control"]
requirements:
  evcc: ["skiptest"]
params:
  - name: usage
    choice: ["grid", "pv", "battery"]
    allinone: true
  - name: host
  - name: capacity
  - name: secondbatterytower
    type: bool
    description:
      de: Zweiter Batterieturm
      en: Second battery tower
    help:
      de: Battery is second battery tower
      en: Batterie ist zweiter Batterieturm
    usages: ["battery"]
  # battery control
  - name: minsoc
    type: int
    default: 7
    advanced: true
  - name: maxsoc
    type: int
    default: 97
    advanced: true
  - name: cache
    advanced: true
    default: 30s
  - name: maxchargepower
  - name: externalpower
    type: bool
    description:
      de: Externe Leistung
      en: External power
    help:
      de: Externe Leistung aller an S0 angeschlossenen Ger√§te abfragen
      en: Query external power of all devices connected to S0
    advanced: true
    usages: ["pv"]
render: |
  type: rct
  uri: {{ .host }}
  usage: {{ .usage }}
  cache: {{ .cache }}
  secondbatterytower: {{ .secondbatterytower }}
  capacity: {{ .capacity }} # kWh
  minsoc: {{ .minsoc }}
  maxsoc: {{ .maxsoc }}
  maxchargepower: {{ .maxchargepower }}
  externalpower: {{ .externalpower }}
