template: rct-power
products:
  - brand: RCT
    description:
      generic: Power
capabilities: ["battery-control"]
requirements:
  evcc: ["skiptest"]
params:
  - name: usage
    choice: ["grid", "pv", "battery"]
  - name: host
  - name: externalpower
    type: bool
    description:
      de: Externe Leistung
      en: External power
    help:
      de: Externe Leistung aller an S0 angeschlossenen Geräte abfragen
      en: Query external power of all devices connected to S0
    advanced: true
    usages: ["pv"]
  - preset: battery-params
  - name: minsoc
    default: 7
  - name: maxsoc
    default: 97
  - name: capacity2
    unit: kWh
    description:
      de: Akkukapazität der zweiten Batterie
      en: Battery capacity of the second battery
    example: 50
    type: float
    usages: ["battery"]
  - name: cache
    advanced: true
    default: 30s
render: |
  type: rct
  uri: {{ .host }}
  usage: {{ .usage }}
  cache: {{ .cache }}
  {{- include "battery-params" . }}
  capacity2: {{ .capacity2 }} # kWh
  externalpower: {{ .externalpower }}
