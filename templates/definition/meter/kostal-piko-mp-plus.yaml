template: kostal-piko-mp-plus
description: Kostal Piko MP Plus
guidedsetup:
  enable: true
params:
- name: usage
  choice: [ "pv" ]
- name: host
  example: 192.0.2.2
  required: true
render: |
  type: custom
  power:
  {{- if eq .usage "pv" }}
    # PV
    source: http
    uri: http://{{ .host }}/measurements.xml
    transform: xml
    jq: .root.Device.Measurements.Measurement[] | select(.attrType == "AC_Power") | .attrValue | tonumber
  {{- end -}}
