template: homeassistant
products:
  - brand: Home Assistant
group: generic
requirements:
  description:
    en: Home Assistant instances in your network will be auto-discovered and suitable vehicle entities and services (e.g. `sensor.*`) will be suggested.
    de: Home Assistant Instanzen in deinem Netzwerk werden automatisch erkannt und passende Entitäten und Services (z.B. `sensor.*`) werden vorgeschlagen.
auth:
  type: homeassistant
  params: [uri]
params:
  - preset: vehicle-common
  - name: uri
    description:
      de: Home Assistant URI
      en: Home Assistant URI
    example: http://homeassistant.local:8123
    help:
      en: " " # overwrite default
      de: " " # overwrite default
    service: homeassistant/instances
    required: true
  - name: token
    deprecated: true
  - name: home
    deprecated: true
  - name: soc
    description:
      de: Ladezustand [%]
      en: State of charge [%]
    service: homeassistant/entities?uri={uri}&domain=sensor
    example: "sensor.vehicle_soc"
    required: true
  - name: range
    description:
      de: Restreichweite [km]
      en: Remaining range [km]
    service: homeassistant/entities?uri={uri}&domain=sensor
    example: "sensor.vehicle_range"
  - name: status
    description:
      de: Ladestatus
      en: Charging status
    service: homeassistant/entities?uri={uri}&domain=sensor
    example: "sensor.vehicle_charging"
  - name: limitSoc
    description:
      de: Ziel-Ladezustand [%]
      en: Target state of charge [%]
    service: homeassistant/entities?uri={uri}&domain=number,input_number
    example: "number.vehicle_target_state_of_charge"
  - name: odometer
    description:
      de: Kilometerstand [km]
      en: Odometer [km]
    service: homeassistant/entities?uri={uri}&domain=sensor
    example: "sensor.vehicle_odometer"
  - name: climater
    description:
      de: Klimatisierung aktiv
      en: Climatisation active
    service: homeassistant/entities?uri={uri}&domain=binary_sensor
    example: "binary_sensor.vehicle_climater"
  - name: finishTime
    description:
      de: Ladeende (ISO8601 oder Unix)
      en: Finish time (ISO8601 or Unix)
    service: homeassistant/entities?uri={uri}&domain=sensor
    example: "sensor.vehicle_finish_time"
  - name: start_charging
    description:
      de: Service zum Laden starten
      en: Service to start charging
    service: homeassistant/entities?uri={uri}&domain=script
    example: "script.vehicle_start_charge"
  - name: stop_charging
    description:
      de: Service zum Laden stoppen
      en: Service to stop charging
    service: homeassistant/entities?uri={uri}&domain=script
    example: "script.vehicle_stop_charge"
  - name: wakeup
    description:
      de: Service zum Aufwecken
      en: Service to wake up vehicle
    service: homeassistant/entities?uri={uri}&domain=script
    example: "script.vehicle_wakeup"
  - name: setMaxCurrent
    description:
      de: Ladestromstärke setzen [A]
      en: Set charging current [A]
    service: homeassistant/entities?uri={uri}&domain=number,input_number
    example: "number.vehicle_charging_current"
  - preset: vehicle-features
  - name: streaming
    default: true
render: |
  type: homeassistant
  {{ include "vehicle-common" . }}
  {{ include "vehicle-features" . }}
  uri: {{ .uri }}
  home: {{ .home }} # deprecated
  sensors:
    soc: {{ .soc }}
    range: {{ .range }}
    status: {{ .status }}
    limitSoc: {{ .limitSoc }}
    odometer: {{ .odometer }}
    climater: {{ .climater }}
    finishTime: {{ .finishTime }}
  services:
    start_charging: {{ .start_charging }}
    stop_charging: {{ .stop_charging }}
    wakeup: {{ .wakeup }}
    setMaxCurrent: {{ .setMaxCurrent }}
