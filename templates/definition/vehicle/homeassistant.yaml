template: homeassistant
products:
  - description:
      generic: Home Assistant Vehicle Integration
      de: Home Assistant Fahrzeug Integration
      en: Home Assistant Vehicle Integration

params:
  - name: sensors_climater
    description:
      de: Klimatisierung Sensor Entity ID
      en: Climater sensor entity ID
    example: "binary_sensor.id_4_gtx_climater"
    type: string
  - name: sensors_maxCurrent
    description:
      de: Maximalstrom Sensor Entity ID
      en: Max current sensor entity ID
    example: "sensor.id_4_gtx_max_current"
    type: string
  - name: sensors_getMaxCurrent
    description:
      de: Aktueller Maximalstrom Sensor Entity ID
      en: Get max current sensor entity ID
    example: "sensor.id_4_gtx_get_max_current"
    type: string
  - name: sensors_finishTime
    description:
      de: Ladeende Sensor Entity ID (ISO8601 oder Unix)
      en: Finish time sensor entity ID (ISO8601 or Unix)
    example: "sensor.id_4_gtx_finish_time"
    type: string
  - name: services_wakeup
    description:
      de: Service zum Aufwecken
      en: Service to wake up vehicle
    example: "script.id_4_gtx_wakeup"
    type: string
  - name: sensors_limitSoc
    description:
      de: Ziel-Ladezustand Sensor Entity ID
      en: Target state of charge sensor entity ID
    example: "number.id_4_gtx_target_state_of_charge"
    type: string
  - name: sensors_odometer
    description:
      de: Kilometerstand Sensor Entity ID
      en: Odometer sensor entity ID
    example: "sensor.id_4_gtx_odometer"
    type: string
  - name: host
    description:
      de: Home Assistant Host URL
      en: Home Assistant Host URL
    help:
      de: z.B. http://192.168.1.10:8123
      en: e.g. http://192.168.1.10:8123
    example: "http://192.168.1.10:8123"
    required: true

  - name: token
    description:
      de: Home Assistant Long-Lived Access Token
      en: Home Assistant Long-Lived Access Token
    required: true
    mask: true

  - name: sensors_soc
    description:
      de: Ladezustand Sensor Entity ID
      en: State of Charge sensor entity ID
    example: "sensor.bmw_soc"
    type: string
    required: true
  - name: sensors_range
    description:
      de: Reichweite Sensor Entity ID
      en: Range sensor entity ID
    example: "sensor.bmw_range_km"
    type: string
  - name: sensors_status
    description:
      de: Ladestatus Sensor Entity ID
      en: Charging status sensor entity ID
    example: "sensor.bmw_charging"
    type: string
  - name: services_start_charging
    description:
      de: Service zum Laden starten
      en: Service to start charging
    example: "script.bmw_start_charge"
    type: string
  - name: services_stop_charging
    description:
      de: Service zum Laden stoppen
      en: Service to stop charging
    example: "script.bmw_stop_charge"
    type: string

render: |
  type: homeassistant
  host: {{ .host }}
  token: {{ .token }}
  sensors:
    soc: {{ .sensors_soc }}
    {{- if .sensors_range }}
    range: {{ .sensors_range }}
    {{- end }}
    {{- if .sensors_status }}
    status: {{ .sensors_status }}
    {{- end }}
    {{- if .sensors_limitSoc }}
    limitSoc: {{ .sensors_limitSoc }}
    {{- end }}
    {{- if .sensors_odometer }}
    odometer: {{ .sensors_odometer }}
    {{- end }}
    {{- if .sensors_climater }}
    climater: {{ .sensors_climater }}
    {{- end }}
    {{- if .sensors_maxCurrent }}
    maxCurrent: {{ .sensors_maxCurrent }}
    {{- end }}
    {{- if .sensors_getMaxCurrent }}
    getMaxCurrent: {{ .sensors_getMaxCurrent }}
    {{- end }}
    {{- if .sensors_finishTime }}
    finishTime: {{ .sensors_finishTime }}
    {{- end }}
  {{- if or .services_start_charging .services_stop_charging }}
  services:
    {{- if .services_start_charging }}
    start_charging: {{ .services_start_charging }}
    {{- end }}
    {{- if .services_stop_charging }}
    stop_charging: {{ .services_stop_charging }}
    {{- end }}
    {{- if .services_wakeup }}
    wakeup: {{ .services_wakeup }}
    {{- end }}
  {{- end }}
