uri: 0.0.0.0:7070 # uri for ui
interval: 10s # control cycle interval

# mqtt message broker
mqtt:
  broker: localhost:1883
  # user:
  # password:

# influx database (v1)
influx:
  url: http://localhost:8086
  database: evcc
  # user:
  # password:

# additional menu entries
menu:
# - title: "Verlauf"
#   subtitle: "Bezugs- und Einspeiseleistung"
#   img: "http://..."
#   link: "http://..."
#   iframe: "http://..."

# push messages
messaging:
  events:
    start: # charge start event
      title: Charge started
      msg: ${loadpoint} started charging in "${mode}" mode
    stop: # charge stop event
      title: Charge finished
      msg: ${loadpoint} finished charging. Charged ${energy:%.1f}kWh in ${duration}.
  services:
  - type: pushover
    app: # app id
    recipients:
    - # list of recipient ids
  - type: telegram
    token: # bot id
    chats:
    - # list of chat ids

# meters
meters:
- name: grid
  type: default
  power: # power reading
    type: mqtt # use mqtt
    topic: mbmd/sdm1-1/Power # mqtt topic
    timeout: 10s # don't use older values
- name: pv
  type: default
  power:
    type: mqtt
    topic: mbmd/sdm1-2/Power
    timeout: 10s # don't use older values
- name: charge
  type: default
  power:
    type: script # use script
    cmd: /bin/sh -c "echo 0" # actual command
    timeout: 3s # kill script after 3 seconds

chargers:
- name: wallbe
  type: wallbe # Wallbe charger
  uri: 192.168.0.8:502 # ModBus address
# legacy: true # enable for older Wallbes with Phoenix EV-CC-AC1-M3-CBC-RCM controller
- name: phoenix
  type: phoenix # Charger with Phoenix Contact controller
  uri: 192.168.0.8:502 # ModBus address
- name: simpleevse-tcp
  type: simpleevse # Charger with Phoenix Contact controller
  uri: 192.168.0.8:502 # TCP ModBus address
- name: simpleevse-rtu
  type: simpleevse # Charger with Phoenix Contact controller
  device: /dev/usb1 # RS485 ModBus device
- name: evsewifi
  type: evsewifi # Charger with Phoenix Contact controller
  uri: http://192.168.1.4 # SimpleEVSE-Wifi address
- name: nrg
  type: nrg # NRGKick charger
  ip: 192.168.1.4 # IP
  macaddress: 00:99:22 # MAC address
  password: # password
- name: go-e
  type: go-e # go-e charger
  uri: http://192.168.1.4 # go-e address
- name: mcc
  type: mcc # Mobile Charger Connect (Audi, Bentley, Porsche)
  uri: https://192.168.1.4 # Mobile Charger Connect address
  password: # home user password
- name: configurable
  type: default # Configurable charger
  status: # charger status A..F
    type: mqtt
    topic: some/topic1
  enabled: # charger enabled state (true/false or 0/1)
    type: mqtt
    topic: some/topic2
  enable: # set charger enabled state
    type: script
    cmd: /bin/sh -c "echo ${enable}"
  maxcurrent: # set charger max current
    type: script
    cmd: /bin/sh -c "echo ${maxcurrent}"

vehicles:
- name: default
  type: default
  title: Default
  capacity: 50 # kWh
  charge:
    type: script # use script
    cmd: /bin/sh -c "echo 50" # actual command
    timeout: 3s # kill script after 3 seconds
  cache: 5m
- name: audi
  type: audi
  title: Q55 TFSIe
  capacity: 10 # kWh
  user: # user
  password: # password
  vin: WAUZZZ...
  cache: 5m
- name: bmw
  type: bmw
  title: i3
  capacity: 65 # kWh
  user: # user
  password: # password
  vin: WBMW...
  cache: 5m
# - name: tesla
#   type: tesla
#   title: Model S
#   capacity: 90 # kWh
#   clientid: # client id
#   clientsecret: # client secret
#   email: # email
#   password: # password
#   vin: WTSLA...
#   cache: 5m
# - name: nissan
#   type: nissan
#   title: Leaf
#   capacity: 60 # kWh
#   user: # user
#   password: # password
#   region: NE # carwings region, leave empty for Europe
#   cache: 5m

loadpoints:
- name: main # name for logging
  vehicle: audi
  charger: wallbe # charger
  gridmeter: grid # grid meter
  pvmeter: pv # pv meter
  chargemeter: charge # charge meter
  sensitivity: 1 # current raise/lower steps size (default 1A)
  guardduration: 10m # switch charger contactor not more often than this (default 10m)
  maxcurrent: 16 # maximum charge current (default 16A)
  phases: 3 # ev phases (default 3)
